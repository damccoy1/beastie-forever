<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<title>Forums - Valgrind possibly lost</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta name="robots" content="index,follow" />
<link type="text/css" rel="stylesheet" rev="stylesheet" href="http://beastie.cs.ua.edu/forum/archive/screen.css" media="screen" />
<link type="text/css" rel="stylesheet" rev="stylesheet" href="http://beastie.cs.ua.edu/forum/archive/print.css" media="print" />
</head>
<body>
<div id="container">
<h1><a href="http://beastie.cs.ua.edu/forum/index.php">Forums</a></h1>
<div class="navigation"><a href="http://beastie.cs.ua.edu/forum/archive/index.php">Forums</a> &gt; <a href="http://beastie.cs.ua.edu/forum/archive/index.php?forum-1.html">CS201</a> &gt; <a href="http://beastie.cs.ua.edu/forum/archive/index.php?forum-6.html">Project 0</a> &gt; Valgrind possibly lost</div>
<div id="fullversion"><strong>Full Version:</strong> <a href="http://beastie.cs.ua.edu/forum/showthread.php?tid=24">Valgrind possibly lost</a></div>
<div id="infobox">You're currently viewing a stripped down version of our content. <a href="http://beastie.cs.ua.edu/forum/showthread.php?tid=24">View the full version</a> with proper formatting.</div>
<div id="content">
<div class="post">
<div class="header">
<div class="author"><h2><a href="http://beastie.cs.ua.edu/forum/member.php?action=profile&amp;uid=7">andrasveto</a></h2></div><div class="dateline">08-30-2018, 12:47 AM</div>
</div>
<div class="message">When running valgrind, I'm getting<br />
<br />
<br />
<div class="codeblock"><div class="title">Code:</div><div class="body" dir="ltr"><code>==56008== LEAK SUMMARY:<br />
==56008==    definitely lost: 0 bytes in 0 blocks<br />
==56008==    indirectly lost: 0 bytes in 0 blocks<br />
==56008==      possibly lost: 72 bytes in 3 blocks<br />
==56008==    still reachable: 200 bytes in 6 blocks<br />
==56008==         suppressed: 22,299 bytes in 158 blocks</code></div></div><br />
<br />
<br />
Should we have 0 bytes in 0 blocks for possibly lost as well as definitely/indirectly lost?<br />
<br />
<br />
Edit:<br />
<br />
I just realized that these 72 bytes leak even on an empty program [i.e. int main() { return 0; }]. I'm running on High Sierra. Is it safe to just ignore these?<br />
<br />
<br />
<div class="codeblock"><div class="title">Code:</div><div class="body" dir="ltr"><code>==72683== 72 bytes in 3 blocks are possibly lost in loss record 26 of 42<br />
==72683==    at 0x1000ABC32: calloc (in /usr/local/Cellar/valgrind/HEAD-fee5954/lib/valgrind/vgpreload_memcheck-amd64-darwin.so)<br />
==72683==    by 0x1007567E2: map_images_nolock (in /usr/lib/libobjc.A.dylib)<br />
==72683==    by 0x1007697DA: objc_object::sidetable_retainCount() (in /usr/lib/libobjc.A.dylib)<br />
==72683==    by 0x100006C64: dyld::notifyBatchPartial(dyld_image_states, bool, char const* (*)(dyld_image_states, unsigned int, dyld_image_info const*), bool, bool) (in /usr/lib/dyld)<br />
==72683==    by 0x100006E39: dyld::registerObjCNotifiers(void (*)(unsigned int, char const* const*, mach_header const* const*), void (*)(char const*, mach_header const*), void (*)(char const*, mach_header const*)) (in /usr/lib/dyld)<br />
==72683==    by 0x10022171D: _dyld_objc_notify_register (in /usr/lib/system/libdyld.dylib)<br />
==72683==    by 0x100756075: _objc_init (in /usr/lib/libobjc.A.dylib)<br />
==72683==    by 0x1001ABB34: _os_object_init (in /usr/lib/system/libdispatch.dylib)<br />
==72683==    by 0x1001ABB1B: libdispatch_init (in /usr/lib/system/libdispatch.dylib)<br />
==72683==    by 0x1000BA9C2: libSystem_initializer (in /usr/lib/libSystem.B.dylib)<br />
==72683==    by 0x100018AC5: ImageLoaderMachO::doModInitFunctions(ImageLoader::LinkContext const&amp;) (in /usr/lib/dyld)<br />
==72683==    by 0x100018CF5: ImageLoaderMachO::doInitialization(ImageLoader::LinkContext const&amp;) (in /usr/lib/dyld)</code></div></div></div>
</div>
<div class="post">
<div class="header">
<div class="author"><h2><a href="http://beastie.cs.ua.edu/forum/member.php?action=profile&amp;uid=6">sbcarp</a></h2></div><div class="dateline">08-30-2018, 09:48 AM</div>
</div>
<div class="message">Only correct output is: All heap blocks were freed -- no leaks are possible.<br />
<br />
Try test the program on another computer, and see if it's environment problem.</div>
</div>
<div class="post">
<div class="header">
<div class="author"><h2>daweil</h2></div><div class="dateline">09-03-2018, 02:52 PM</div>
</div>
<div class="message">I've noticed some Mac users are experiencing some memory leak issues not caused by their program, but by Valgrind itself. High Sierra made some changes that are causing quirks with Valgrind. I've tested a few student's code on my Windows machine with WSL and my Debian Linux machine. Both turned out completely clean.<br />
<br />
If you want to be certain, I can run your code on my machine after class.</div>
</div>
<div class="post">
<div class="header">
<div class="author"><h2><a href="http://beastie.cs.ua.edu/forum/member.php?action=profile&amp;uid=1">lusth</a></h2></div><div class="dateline">09-03-2018, 04:09 PM</div>
</div>
<div class="message">Don't forget that the test0 dropbox will run a 'make test' command. You can place some valgrind tests under that to see if your programs are truly clean.</div>
</div>
<div class="post">
<div class="header">
<div class="author"><h2><a href="http://beastie.cs.ua.edu/forum/member.php?action=profile&amp;uid=7">andrasveto</a></h2></div><div class="dateline">09-03-2018, 07:11 PM</div>
</div>
<div class="message">Thanks. I ended up just testing on a linux vm instead and valgrind reported no leaks, so it was an osx issue.</div>
</div>
<div class="post">
<div class="header">
<div class="author"><h2><a href="http://beastie.cs.ua.edu/forum/member.php?action=profile&amp;uid=37">magarwal</a></h2></div><div class="dateline">09-03-2018, 07:15 PM</div>
</div>
<div class="message"><blockquote class="mycode_quote"><cite><span> (09-03-2018, 04:09 PM)</span>lusth Wrote: <a href="http://beastie.cs.ua.edu/forum/showthread.php?pid=173#pid173">[ -> ]</a></cite>Don't forget that the test0 dropbox will run a 'make test' command. You can place some valgrind tests under that to see if your programs are truly clean.</blockquote><br />
The test0 dropbox is still not sending out reports though.</div>
</div>
<div class="post">
<div class="header">
<div class="author"><h2><a href="http://beastie.cs.ua.edu/forum/member.php?action=profile&amp;uid=1">lusth</a></h2></div><div class="dateline">09-03-2018, 10:02 PM</div>
</div>
<div class="message">I think I may have found the problem... Let me know if you still aren't getting reports.</div>
</div>
</div>
<div class="navigation"><a href="http://beastie.cs.ua.edu/forum/archive/index.php">Forums</a> &gt; <a href="http://beastie.cs.ua.edu/forum/archive/index.php?forum-1.html">CS201</a> &gt; <a href="http://beastie.cs.ua.edu/forum/archive/index.php?forum-6.html">Project 0</a> &gt; Valgrind possibly lost</div>
</div>
<div id="footer">
Powered By <a href="https://mybb.com">MyBB</a>, &copy; 2002-2018 <a href="https://mybb.com">MyBB Group</a>
</div>
</body>
</html>
