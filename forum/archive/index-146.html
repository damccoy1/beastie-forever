<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<title>Forums - Valgrind error - pr_set_ptracer</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta name="robots" content="index,follow" />
<link type="text/css" rel="stylesheet" rev="stylesheet" href="http://beastie.cs.ua.edu/forum/archive/screen.css" media="screen" />
<link type="text/css" rel="stylesheet" rev="stylesheet" href="http://beastie.cs.ua.edu/forum/archive/print.css" media="print" />
</head>
<body>
<div id="container">
<h1><a href="http://beastie.cs.ua.edu/forum/index.php">Forums</a></h1>
<div class="navigation"><a href="http://beastie.cs.ua.edu/forum/archive/index.php">Forums</a> &gt; <a href="http://beastie.cs.ua.edu/forum/archive/index.php?forum-1.html">CS201</a> &gt; <a href="http://beastie.cs.ua.edu/forum/archive/index.php?forum-6.html">Project 0</a> &gt; Valgrind error - pr_set_ptracer</div>
<div id="fullversion"><strong>Full Version:</strong> <a href="http://beastie.cs.ua.edu/forum/showthread.php?tid=45">Valgrind error - pr_set_ptracer</a></div>
<div id="infobox">You're currently viewing a stripped down version of our content. <a href="http://beastie.cs.ua.edu/forum/showthread.php?tid=45">View the full version</a> with proper formatting.</div>
<div id="content">
<div class="post">
<div class="header">
<div class="author"><h2><a href="http://beastie.cs.ua.edu/forum/member.php?action=profile&amp;uid=138">dlwarren2</a></h2></div><div class="dateline">09-07-2018, 09:59 PM</div>
</div>
<div class="message">Is this error I'm getting anything to worry about? I'm using Valgrind version 3.14.0.SVN and Ubuntu 18.04.1 LTS through bash 4.4.19.</div>
</div>
<div class="post">
<div class="header">
<div class="author"><h2>daweil</h2></div><div class="dateline">09-09-2018, 06:26 AM</div>
</div>
<div class="message">Valgrind is using functions from a particular Linux Library called prctl (<a href="https://www.systutorials.com/docs/linux/man/2-prctl/" target="_blank" rel="noopener" class="mycode_url">https://www.systutorials.com/docs/linux/man/2-prctl/</a> or <a href="https://linux.die.net/man/2/prctl" target="_blank" rel="noopener" class="mycode_url">https://linux.die.net/man/2/prctl</a>) to perform operations on your process (the program you compiled). vgdb is an intermediate between gdb and valgrind. <br />
<br />
This problem can occur on Ubuntu 10.10 and above, as that particular linux distribution restricts operation much more than other distributions. From the manual:<br />
<br />
<blockquote class="mycode_quote"><cite>Quote:</cite>Ubuntu versions 10.10 and later may restrict the scope of ptrace to the children of the process calling ptrace. As the Valgrind process is not a child of vgdb, such restricted scoping causes the ptrace calls to fail. To avoid that, when Valgrind gdbserver receives the first packet from a vgdb, it calls prctl(PR_SET_PTRACER, vgdb_pid, 0, 0, 0) to ensure vgdb can reliably use ptrace. Once vgdb_pid has been marked as a ptracer, vgdb can then properly force the invocation of Valgrind gdbserver when needed. To ensure the vgdb is set as a ptracer before the Valgrind process gets blocked in a system call, connect your GDB to the Valgrind gdbserver at startup by passing --vgdb-error=0 to Valgrind. </blockquote>
<br />
 Toss in "--vgdb-error=0" into the command line argument.</div>
</div>
</div>
<div class="navigation"><a href="http://beastie.cs.ua.edu/forum/archive/index.php">Forums</a> &gt; <a href="http://beastie.cs.ua.edu/forum/archive/index.php?forum-1.html">CS201</a> &gt; <a href="http://beastie.cs.ua.edu/forum/archive/index.php?forum-6.html">Project 0</a> &gt; Valgrind error - pr_set_ptracer</div>
</div>
<div id="footer">
Powered By <a href="https://mybb.com">MyBB</a>, &copy; 2002-2018 <a href="https://mybb.com">MyBB Group</a>
</div>
</body>
</html>
