<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<title>Forums - Installing Valgrind on WSL</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta name="robots" content="index,follow" />
<link type="text/css" rel="stylesheet" rev="stylesheet" href="http://beastie.cs.ua.edu/forum/archive/screen.css" media="screen" />
<link type="text/css" rel="stylesheet" rev="stylesheet" href="http://beastie.cs.ua.edu/forum/archive/print.css" media="print" />
</head>
<body>
<div id="container">
<h1><a href="http://beastie.cs.ua.edu/forum/index.php">Forums</a></h1>
<div class="navigation"><a href="http://beastie.cs.ua.edu/forum/archive/index.php">Forums</a> &gt; <a href="http://beastie.cs.ua.edu/forum/archive/index.php?forum-1.html">CS201</a> &gt; <a href="http://beastie.cs.ua.edu/forum/archive/index.php?forum-6.html">Project 0</a> &gt; Installing Valgrind on WSL</div>
<div id="fullversion"><strong>Full Version:</strong> <a href="http://beastie.cs.ua.edu/forum/showthread.php?tid=2">Installing Valgrind on WSL</a></div>
<div id="infobox">You're currently viewing a stripped down version of our content. <a href="http://beastie.cs.ua.edu/forum/showthread.php?tid=2">View the full version</a> with proper formatting.</div>
<div id="content">
<div class="post">
<div class="header">
<div class="author"><h2>daweil</h2></div><div class="dateline">08-20-2018, 06:13 PM</div>
</div>
<div class="message">If you are using the Windows Subsystem for Linux (For Mac users, please see the other thread), and install valgrind using apt-get, you are likely to run into this potential issue when you run valgrind with no input:<br />
<br />
<div class="codeblock"><div class="title">Code:</div><div class="body" dir="ltr"><code>daweil@Weil-PC:~&#36; valgrind<br />
-1: ANON 0038000000-00383d5fff 4022272 r-x-- SmFixed d=0x000 i=25365   o=0       (0) m=0 /usr/lib/valgrind/memcheck-amd64-linux<br />
Valgrind: FATAL: aspacem assertion failed:<br />
segment_is_sane<br />
at m_aspacemgr/aspacemgr-linux.c:1502 (add_segment)<br />
Exiting now.</code></div></div><br />
When you should be getting the following when you run it with no input:<br />
<br />
<div class="codeblock"><div class="title">Code:</div><div class="body" dir="ltr"><code>daweil@Weil-PC:~&#36; valgrind<br />
valgrind: no program specified<br />
valgrind: Use --help for more information.</code></div></div><br />
<br />
The short answer: You have a bad install because WSL doesn't have every Linux kernel service implemented.<br />
<br />
The work around: A manual installation (compiling the source code) to adjust for the lack of services.<br />
<br />
The steps:<br />
<br />
<ol type="1" class="mycode_list"><li>Uninstall valgrind if you installed it via apt-get<br />
</li>
<li>Get the source: "wget <a href="http://ftp.sourceware.org/pub/valgrind/valgrind-3.13.0.tar.bz2" target="_blank" rel="noopener" class="mycode_url">ftp.sourceware.org/pub/valgrind/valgrind-3.13.0.tar.bz2</a>" (Or just download it to your desktop/download, and copy-paste it into the WSL).<br />
</li>
<li>Extract it: "tar -xvjf valgrind-3.13.0.tar.bz2"<br />
</li>
<li>Configure it: Change directory into the extracted folder (cd valgrind-3.13.0) and then launch "./configure" <br />
</li>
<li>Make: Same folder, just launch "make".<br />
</li>
<li>Check your dependencies by typing "make check"<br />
</li>
<li>Install it: type "sudo make install"<br />
</li>
</ol>
It will take some time to configure, make, checking the dependencies, and to install it. Let the WSL process. If "make check" bounces back stating you're missing dependencies like g++, you will need to install it via apt-get install g++.</div>
</div>
<div class="post">
<div class="header">
<div class="author"><h2><a href="http://beastie.cs.ua.edu/forum/member.php?action=profile&amp;uid=1">lusth</a></h2></div><div class="dateline">08-22-2018, 07:22 PM</div>
</div>
<div class="message">If you are have trouble installing valgrind, the College of Engineering has scheduled six 4-hour help sessions for students needing assistance installing software on their laptops.  All sessions will be in Hardaway 256.<br />
 <br />
Here is the schedule:<br />
This week: Wednesday-Friday 10-2<br />
Next week: Mon, Wed, Friday 10-2<br />
<br />
There is a webpage for COE software: <a href="http://ites.eng.ua.edu/software/" target="_blank" rel="noopener" class="mycode_url">http://ites.eng.ua.edu/software/</a></div>
</div>
<div class="post">
<div class="header">
<div class="author"><h2><a href="http://beastie.cs.ua.edu/forum/member.php?action=profile&amp;uid=1">lusth</a></h2></div><div class="dateline">08-22-2018, 07:27 PM</div>
</div>
<div class="message">Also, Mac people should make sure gdb is also installed.</div>
</div>
<div class="post">
<div class="header">
<div class="author"><h2>daweil</h2></div><div class="dateline">08-25-2018, 08:28 PM</div>
</div>
<div class="message">URL for the wget was slightly incorrect. Fixed.</div>
</div>
<div class="post">
<div class="header">
<div class="author"><h2><a href="http://beastie.cs.ua.edu/forum/member.php?action=profile&amp;uid=24">bdgerszewski</a></h2></div><div class="dateline">08-25-2018, 09:22 PM</div>
</div>
<div class="message">Make sure you're current with Windows updates.  I wasn't and had problems with valgrind installed via the package manager as well as built from source (3.14.0.SVN, 3.14.0.GIT, 3.13.0, and 3.12.0). After updating windows, I was able to install it via the package manager (sudo apt-get install valgrind) and it worked just fine .</div>
</div>
<div class="post">
<div class="header">
<div class="author"><h2><a href="http://beastie.cs.ua.edu/forum/member.php?action=profile&amp;uid=30">jmlawson</a></h2></div><div class="dateline">08-27-2018, 07:04 AM</div>
</div>
<div class="message">I ran into this problem because I had Ubuntu version 14.04 installed. After upgrading to Ubuntu 16.04 valgrind installed with no problems. You can use the following two commands to check your version and upgrade to 16.04. Then sudo apt-get install valgrind should work.<br />
<br />
lsb_release -a <br />
<br />
<span style="color: #000000;" class="mycode_color">sudo do-release-upgrade </span></div>
</div>
</div>
<div class="navigation"><a href="http://beastie.cs.ua.edu/forum/archive/index.php">Forums</a> &gt; <a href="http://beastie.cs.ua.edu/forum/archive/index.php?forum-1.html">CS201</a> &gt; <a href="http://beastie.cs.ua.edu/forum/archive/index.php?forum-6.html">Project 0</a> &gt; Installing Valgrind on WSL</div>
</div>
<div id="footer">
Powered By <a href="https://mybb.com">MyBB</a>, &copy; 2002-2018 <a href="https://mybb.com">MyBB Group</a>
</div>
</body>
</html>
