<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
   "DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<!-- XML file produced from file: controlFunctions.tex
     using Hyperlatex v 2.9-in-waiting-rk (oct06) (c) Otfried Cheong
     on Emacs 22.2.1, Thu Apr 20 14:30:23 2017 -->
<head>
<title>Songlib: control functions</title>

<style type="text/css">
.maketitle { align : center }
div.abstract { margin-left: 20%; margin-right: 10%; }
h3.abstract  { align : center }
div.verse, div.quote, div.quotation {
  margin-left : 10%; 
  margin-right : 10%;
}
dt {font-weight: bold}
</style>
<link rel=stylesheet
        href="lusth.css" type="text/css" />
</head>
<body>
<p><h1 class="maketitle">Songlib: control functions<br /></h1>
<h2 class="maketitle">John C. Lusth</h2>
<h3 class="maketitle">Revision Date: April 20, 2017</h3>
</p>

<h3><a name="id1"><a href="controlFunctions.pdf">Printable Version</a></a></h3><hr />
<h1><a name="id2">Controlling output</a></h1><p>
There are a number of functions for controlling the output of played notes.
</p>

<h2><a name="id3">setTime</a></h2>
<pre>
    void setTime(int beatsPerMeasure,int noteValue);
</pre>
<p>Sets the time signature of a song. The <i>beatsPerMeasure</i> argument is used by
the <a href="keepingTime.html">keepingTime</a> facility.
</p>

<h2><a name="id4">setPrimaryEmphasis, getPrimaryEmpahasis</a></h2>
<pre>
    double setPrimaryEmphasis(double amplification);
    double getPrimaryEmphasis(void);
    double setSecondaryEmphasis(double amplification);
    double getSecondaryEmphasis(void);
</pre>
<p><i><b>Songlib</b></i>&#32;can place emphasis on the first beat of a measure. It does so
by increasing the amplitude of notes played at this location. To
enable this feature, send an amplification value other than 1.
<i><b>Songlib</b></i>&#32;can also place an emphasis on the middle beat of
a measure (assuming there is a middle beat) using
<i>setSecondaryEmphasis</i>.
Usually, the primary emphasis is set to be larger than the secondary
emphasis.
Sending amplification values less than one to either function causes
the emphasized beat to be played softer than the surrounding beats.
</p>
<p>Both
<i>setPrimaryEmphasis</i> and
<i>setSecondaryEmphasis</i>
return the previous amplification values.
</p>

<h2><a name="id5">setSustain, getSustain</a></h2>
<pre>
    double setSustain(double fade);
    double getSustain(void);
</pre>
<p>Sustain governs how long a note continues to play after it has
played for the requested number of beats. It is often undesirable
for a note to abrubtly end as this often results in audible
clicks upon playback. A better strategy is to have the note
fade out. A sustain value near very close to one
results in a long fade-out while
a sustain value further away from one results in a quicker fade-out.
</p>
<p>Setting a sustain value of 1.0 means 'no fade' and previous notes will continue
playing with no diminishing of amplitude until the note data is exhausted.
A value of 0.0 means 
note stops playing abruptly. Good values usually range
between 0.999 and 0.99995. The default value is 0.999. A value of 0.99995
gives an effect similar to holding the sustain pedal down on a piano.
</p>
<p>The return value of <i>setSustain</i> is the previous sustain value.
</p>

<h2><a name="id6">setStride, getStride, setStrideSlop</a></h2>
<pre>
    double setStride(double delay);
    double getStride(void);
</pre>
<p>Sets the delay between the starts of the individual notes of a chord to
<i>delay</i> beats. A delay value of 0.0 means all notes of a chord will
start at the same time. A positive delay means the first note in the chord
starts immediately, the next note in the chord starts <i>delay</i> beats
later, the next note <i>delay * 2</i> beats later still, and so on. The use
of a positive stride gives a more realistic chording. The default stride
delay is 0.25 beats.
</p>
<p>The return value of <i>setStride</i> is the previous value of <i>delay</i>.
</p>
<p>The function <i>setStrideSlop</i> can be called to randomly vary the delay
between chord notes. The single argument to <i>setStrideSlop</i>
is a real number that represents seconds. Given a value of <i>s</i>, the function 
will adjust the stride value between notes by a random value chosen
between <i>-s</i> and <i>s</i>.
</p>
<p>See <a href="chord.html">chord</a> for more information about chords.
</p>

<h2><a name="id7">setSkipBeats, getSkipBeats, setSkipSeconds, getSkipSeconds</a></h2>
<pre>
    double setSkipBeats(double beats);
    double getSkipBeats(void);
    double setSkipSeconds(double seconds);
    double getSkipSeconds(void);
</pre>
<p>Causes the first <i>beats</i> of the entire output to be thrown away. Useful for
when you are working on the interior of a track and you don't want to
listen from the very beginning to assess your changes.
</p>
<p>The return value of <i>setSkipBeats</i> is the previous value of the skip.
</p>
<p>The alternate forms, <i>setSkipSeconds</i> and <i>getSkipSeconds</i>, are 
like <i>setSkipBeats</i> and <i>getSkipBeats</i>, only the units are in seconds.
</p>

<h2><a name="id8">setAmplitude, getAmplitude</a></h2>
<pre>
    double setAmplitude(double level)
    double getAmplitude(void);
</pre>
<p>Sets the overall amplitude of output to that of <i>level</i>. Returns the
previous amplitude. The default level is 1.0 meaning the notes are output
as read. To increase the volume of the output, choose a level greater than
1.0. To decrease the volume, choose a non-negative level less than 1.0.
</p>
<p>The function <i>setAmplitude</i> returns the previous amplitude setting.
</p>

<h2><a name="id9">setTempo, getTempo</a></h2>
<pre>
    int setTempo(int beatsPerMinute);
    int getTempo(void);
</pre>
<p>Sets the tempo of a song. The default tempo is 132 beats per minute.
Setting the tempo with a value higher than 132 speeds up the song while
setting the tempo to a lower value slows down the song.
</p>
<p>The return value
of <i>setTempo</i> is the previous tempo setting.
</p>

<h2><a name="id10">setKey, getKey</a></h2>
<pre>
    int setKey(int key);
    int getKey(void);
</pre>
<p>Sets the key signature of a song. The argument <i>key</i> is one of the
predefined variables:
<b>C</b>, <b>Cs</b>, <b>Db</b>, <b>D</b>, <b>Ds</b>, <b>Eb</b>, <b>E</b>, <b>F</b>, etc.
</p>
<p>See also: <a href="keySignatures.html">keySignatures</a>.
</p>

<h2><a name="id11">setDrawRamp, getDrawRamp</a></h2>
<pre>
    double setDrawRamp(int double);
    double getDrawRamp(void);
</pre>
<p>Sets the time of transition between successive notes in a draw.
</p>
<p>See also: <a href="draw.html">draw</a>.
</p>

<h2><a name="id12">beginCrescendo, endCrescendo</a></h2>
<pre>
    void beginCrescendo(double ramp);
    void endCrescendo(void);
</pre>
<p>These functions are always used in pairs; in between the calls,
the songlib output steadily increases or decreases in volume depending
on the value of <i>ramp</i>. Values greater than one cause an
increase in volume; <i>ramp</i> values less than one cause
a decrease in volume. A ramp value of 2 eventually 
doubles the amplitude values
over the span; a ramp value of 0.5 eventually halves the amplitude
values over
the span.
Note: due to the non-linear nature of perceived volume,
doubling (halving) amplitude values does not double (halve)
the perceived volume.
</p>

<h2><a name="id13">beginRitardando, endRitardando</a></h2>
<pre>
    void beginRitardando(double ramp);
    void endRitardando(void);
</pre>
<p>These functions are always used in pairs; in between the calls,
the songlib output steadily increases or decreases in tempo depending
on the value of <i>ramp</i>. Positive values cause a
decrease in tempo; negative <i>ramp</i> values cause
an increase in volume. When a note with length <i>b</i> beats is played,
the tempo is reduced by <i>b</i> * <i>ramp</i> after the note
concludes. When a chord is played, the tempo is decreased after the
last note of the chord is played.
The behavior of this function is undefined if a call to <i>backwards</i> is
made in between the <i>beginRitardando</i> and <i>endRitardando</i> calls.
</p>

<h2><a name="id14">setInterp, getInterp</a></h2>
<pre>
    int setInterp(int type);
    int getInterp(void);
</pre>
<p>The three interpolation methods available in songlib
are linear (type 1), sinusoidal (type 2), and cubic (type 3).
The smaller the type number, the faster and more crude the
interpolation method. The <i>setInterp</i> function returns the previous
interpolation type while the <i>getInterp</i> method returns the
current type. The default type is sinusoidal.
</p>
<address><a href="mailto:lusth@cs.ua.edu"><p>lusth@cs.ua.edu</a></address><br />
</body></html>
